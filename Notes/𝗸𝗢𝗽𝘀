Mastering Kubernetes Operations with kOps: From Cluster Creation to Intelligent Scheduling with Pods, Labels & Node Selectors

Hereâ€™s a comprehensive guide on setting up a Kubernetes cluster using kOps,.

ğŸ”§ ğ—ªğ—µğ—®ğ˜ ğ—¶ğ˜€ ğ—¸ğ—¢ğ—½ğ˜€?
âœ… kOps stands for Kubernetes Operations.
âœ… It's the easiest way to get a production-grade Kubernetes cluster up and running.
âœ… kOps can create, destroy, upgrade, and maintain Kubernetes clusters and provision cloud infrastructure.

ğŸŒŸ ğ—ğ—²ğ˜† ğ—™ğ—²ğ—®ğ˜ğ˜‚ğ—¿ğ—²ğ˜€ ğ—¼ğ—³ ğ—¸ğ—¢ğ—½ğ˜€:
âœ… Automates provisioning of Highly Available Kubernetes clusters.
âœ… Built on a state-sync model for dry runs and automatic idempotency.
âœ… Can generate Terraform configurations.
âœ… Supports zero-config managed Kubernetes add-ons.
âœ… Offers command-line autocompletion.
âœ… Uses YAML-based API configuration.

ğŸ§° ğ—¦ğ—²ğ˜ğ˜ğ—¶ğ—»ğ—´ ğ—¨ğ—½ ğ—¬ğ—¼ğ˜‚ğ—¿ ğ—ğ˜‚ğ—¯ğ—²ğ—¿ğ—»ğ—²ğ˜ğ—²ğ˜€ ğ—–ğ—¹ğ˜‚ğ˜€ğ˜ğ—²ğ—¿ ğ—¨ğ˜€ğ—¶ğ—»ğ—´ ğ—¸ğ—¢ğ—½ğ˜€:
âœ… Launch a t2.micro EC2 instance and connect to it.
âœ… Modify .bashrc to set the PATH (for Ubuntu, skip this step).

ğ—œğ—»ğ˜€ğ˜ğ—®ğ—¹ğ—¹ ğ—”ğ—ªğ—¦ ğ—–ğ—Ÿğ—œ:
â¤ curl "https://lnkd.in/gZCQnaAD" -o "awscliv2.zip"
â¤ unzip awscliv2.zip
â¤ sudo ./aws/install

ğ—œğ—»ğ˜€ğ˜ğ—®ğ—¹ğ—¹ ğ—¸ğ—¢ğ—½ğ˜€:
â¤ curl -Lo kops https://lnkd.in/gBD-kpWK -s https://lnkd.in/ghHEte9Z | grep tag_name | cut -d '"' -f 4)/kops-linux-amd64
â¤ chmod +x kops
â¤ sudo mv kops /usr/local/bin/kops

ğ—œğ—»ğ˜€ğ˜ğ—®ğ—¹ğ—¹ ğ—¸ğ˜‚ğ—¯ğ—²ğ—°ğ˜ğ—¹:
â¤ curl -LO "https://lnkd.in/gjeeyS_c -L -s https://lnkd.in/gqbggTjj"
â¤ chmod +x kubectl
â¤ sudo mv kubectl /usr/local/bin/

Get these URLs from the official documents

âœ…Assign an IAM Role with Admin Permissions to the instance.
âœ…Create an S3 bucket for storing cluster configuration:
 aws s3 mb s3://chandu.k8s
 export KOPS_STATE_STORE=s3://chandu.k8s
âœ…Enable bucket versioning to retain deleted data.

ğŸš€ ğ—–ğ—¿ğ—²ğ—®ğ˜ğ—² ğ—¬ğ—¼ğ˜‚ğ—¿ ğ—–ğ—¹ğ˜‚ğ˜€ğ˜ğ—²ğ—¿
kops create cluster --name chandu.k8s.local --zones us-east-1a,us-east-1b,us-east-1c --master-size t2.medium --master-count 1 --master-volume-size 30 --node-size t2.micro --node-count 2 --node-volume-size 20

âœ… Copy and run the suggested command to launch the cluster.
âœ… Use ğ—¸ğ˜‚ğ—¯ğ—²ğ—°ğ˜ğ—¹ ğ—´ğ—²ğ˜ ğ—»ğ—¼ğ—±ğ—²ğ˜€ or add -ğ˜„ to monitor the status.

ğŸ§¾ ğ——ğ—²ğ—½ğ—¹ğ—¼ğ˜†ğ—¶ğ—»ğ—´ ğ—£ğ—¼ğ—±ğ˜€:
âœ… write an yaml file
 kubectl create -f pod.yaml
 kubectl get pod -o wide
âœ… Scheduler places the pod on the most appropriate node.

ğ—œğ—»ğ˜€ğ—½ğ—²ğ—°ğ˜ ğ˜„ğ—¶ğ˜ğ—µ:
â¤ kubectl describe pod <pod-name>
â¤ kubectl get pod -o yaml
â¤ kubectl get pod -o json

ğŸ§¹ ğ—£ğ—¼ğ—± ğ— ğ—®ğ—»ğ—®ğ—´ğ—²ğ—ºğ—²ğ—»ğ˜
ğ——ğ—²ğ—¹ğ—²ğ˜ğ—² ğ—½ğ—¼ğ—±ğ˜€:
â¤ kubectl delete pod pod-1 pod-2
â¤ kubectl delete pod --all

ğ—”ğ—°ğ—°ğ—²ğ˜€ğ˜€ ğ—½ğ—¼ğ—± ğ˜€ğ—µğ—²ğ—¹ğ—¹:
â¤ kubectl exec -it pod-name -- bash
