Assigning Pods to Nodes ğŸ“¥ (Beyond Node Selectors)

#NodeAffinity  ğŸ§  

Why Node Affinity â“ 

Node selectors are great for basic pod placement based on node labels ğŸ· . But what if you need more control ğŸ®  over where your pods land ğŸ›¬ â“  

In k8s cluster node affinity offers advanced capabilities to fine-tune ğŸ¶  pod scheduling. Node Affinity enables a conditional approach with logical operators in the matching process. It lets you define complex rulesğŸ“for where your pods can be scheduled based on node labelsğŸ·.

Think of it as creating a wish listğŸ—’for your pod's ideal homeğŸ â— 

Properties in Node Affinity:
ğŸ…°#requiredDuringSchedulingIgnoredDuringExecution:

This scheduler can't schedule the Pod unless the rule is met.

ğŸ…±#preferredDuringSchedulingIgnoredDuringExecution:

This scheduler tries to find a node that meets the ruleğŸ“. If a matching node is not available, the scheduler still schedules the Pod.

How to configure Pods with Node Affinity â” 
spec:
 affinity:
  nodeAffinity:
    requiredDuringSchedulingIgnoredDuringExecution:
      nodeSelectorTerms:
        - matchExpressions:
                - key: disktype
                  operator: In
                  values:
                     - ssd

(A Pod with a Node Affinity rule that targets nodes labeled disktype=ssd)

The following are the logical operators that one can use in the operator field for Node Affinity and Pod Affinity:

ğŸ’  In : The label value is present in the supplied set of strings.
ğŸ’  NotIn : The label value is notğŸš«contained in the supplied set of strings.
ğŸ’  Exists : A label with this keyğŸ—exists on the object. 
ğŸ’  DoesNotExist : NoğŸš«label with this key exists on the object.

Other ways of assigning/scheduling a pod to node are:
#nodeSelector
#TaintAndToleration
